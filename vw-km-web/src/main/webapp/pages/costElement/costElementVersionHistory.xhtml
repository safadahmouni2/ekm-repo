<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:ace="http://www.icefaces.org/icefaces/components"
      xmlns:icecore="http://www.icefaces.org/icefaces/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	<table border="0" cellpadding="0" cellspacing="0" width="771">
		<tbody>
			<tr>
				<td height="17" width="49%"><strong><h:outputText value="#{msgs['costelement.versioning.title']}" /></strong></td>
				<td width="2%"></td>
				<td width="49%">&#160;</td>
			</tr>
			<tr>
				<td colspan="3" height="17"><h:panelGroup layout="block" rendered="#{empty costElementBean.dto.versionChanges}">
					<center><strong><h:outputText value="#{msgs['costelement.versionChanges.empty']}" /></strong></center>
				</h:panelGroup> <h:panelGroup layout="block" styleClass="mc" rendered="#{!empty costElementBean.dto.versionChanges}">
						<h:dataTable width="100%"
                        value="#{costElementBean.dto.versionChanges}"
						var="versionChange"
                        binding="#{costElementBean.versionHistoryTable}"
						styleClass="iceDatTbl element_cost_attribute"
						rowClasses="iceDatTblRow1,iceDatTblRow2"
						columnClasses="iceDatTblCol1,iceDatTblCol2,iceDatTblCol1,iceDatTblCol2,iceDatTblCol1,iceDatTblCol2,iceDatTblCol1,iceDatTblCol2,iceDatTblCol1,iceDatTblCol2,iceDatTblCol1,iceDatTblCol2,iceDatTblCol1,iceDatTblCol2"
                        >
						<h:column headerClass="iceDatTblColHdr1 tabIce_left2 PFF">
							<f:facet name="header">
                                 <h:outputText value="#{msgs['costelement.versionChanges.change']}"/>
							</f:facet>
							<h:outputText value="#{versionChange.changeType}" />
						</h:column>
                        
						<h:column headerClass="iceDatTblColHdr2 tabIce_left2 PFF">
							<f:facet name="header">
                                 <h:outputText value="#{msgs['costelement.versionChanges.attribute']}"/>
							</f:facet>
							<h:outputText value="#{versionChange.change}" />
						</h:column>
						<h:column headerClass="iceDatTblColHdr1 tabIce_left2 PFF">
							<f:facet name="header">
								<h:outputText value="#{msgs['costelement.versionChanges.level']}" />
							</f:facet>
							<h:outputText value="#{costElementBean.dto.elementVersion.number}" />
						</h:column>
						<h:column headerClass="iceDatTblColHdr2 tabIce_left2 PFF">
							<f:facet name="header">
								<h:outputText value="#{msgs['costelement.owner']}" />
							</f:facet>
							<h:outputText value="#{versionChange.elementVersion.element.owner.brandId}" />
						</h:column>
						<h:column headerClass="iceDatTblColHdr1 tabIce_left2 PFF">
							<f:facet name="header">
								<h:outputText value="#{msgs['costelement.users']}" />
							</f:facet>
							<ui:repeat value="#{costElementBean.dto.elementVersion.users}" var="brand">
								   <h:outputText value="#{brand.brandId}" />&#160;
							</ui:repeat>
						</h:column>
						<h:column headerClass="iceDatTblColHdr2 tabIce_left2 PFF">
							<f:facet name="header">
								<h:outputText style="white-space: nowrap;" value="#{msgs['costelement.versionChanges.oldValue']}" />
							</f:facet>
							<h:outputText value="#{versionChange.oldValue}" />&#160;<h:outputText rendered="#{versionChange.oldValue != null}" value="#{versionChange.unit}" />
						</h:column>
						<h:column headerClass="iceDatTblColHdr1 tabIce_left2 PFF">
							<f:facet name="header">
								<h:outputText style="white-space: nowrap;" value="#{msgs['costelement.versionChanges.newValue']}" />
							</f:facet>
							<h:outputText value="#{versionChange.newValue}" escape="false" />&#160;<h:outputText rendered="#{versionChange.newValue != null}" value="#{versionChange.unit}" />
						</h:column>
						<h:column style="width:10%" headerClass="iceDatTblColHdr2 tabIce_left2 PFF element_cost_historie_header8">
							<f:facet name="header">
								<h:outputText value="#{msgs['costelement.versionChanges.oldComment']}" />
							</f:facet>
							<h:outputText value="#{versionChange.oldComment}"/>
						</h:column>
						<h:column style="width:10%" headerClass="iceDatTblColHdr1 tabIce_left2 PFF element_cost_historie_header9">
							<f:facet name="header">
								<h:outputText value="#{msgs['costelement.versionChanges.newComment']}" />
							</f:facet>
							<h:outputText value="#{versionChange.newComment}"/>
						</h:column>
						<h:column style="width:5%" headerClass="iceDatTblColHdr2 tabIce_left2 PFF element_cost_historie_header10">
                        
                        <f:facet name="header">
                              <h:outputText value="#{msgs['costelement.versionChanges.date']}"/>
                        </f:facet>
							
							<h:outputText value="#{versionChange.date.dateSeparatedPt}"/>
						</h:column >
						<h:column headerClass="iceDatTblColHdr1 tabIce_left2 PFF">
							<f:facet name="header" style="width:5%"> 
								<h:outputText value="#{msgs['costelement.versionChanges.user']}" />
							</f:facet>
							<h:outputText value="#{versionChange.userFullName}"/>
						</h:column>
						<h:column style="width:30%" headerClass="iceDatTblColHdr2 tabIce_left2 PFF element_cost_historie_header12">
							<f:facet name="header">
								<h:outputText value="#{msgs['costelement.versioning.list.remark']}" />
							</f:facet>
							<h:outputText value="#{versionChange.remark}"/>
						</h:column>
						<h:column headerClass="iceDatTblColHdr1 tabIce_left2 PFF">
							<f:facet name="header" style="width:5%"> 
								<h:outputText value="" />
							</f:facet>
							<h:commandLink style="float: right;" actionListener="#{costElementBean.showHistoryDetailPopup}" >
								<f:param name="change" value="#{versionChange.change}" />
								<img src="../images/loupe.gif" />
								<f:ajax render="@all" execute="@form" />
							</h:commandLink>
						</h:column>						
					</h:dataTable>	
				</h:panelGroup></td>
			</tr>
			<tr>
				<td colspan="3" height="8"></td>
			</tr>
		</tbody>
	</table>
	<script type="text/javascript">
	   screenResizeInit ();	
	</script>
</html>